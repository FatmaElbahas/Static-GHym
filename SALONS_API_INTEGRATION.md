# ุฏูุฌ API ุงูุนูุงุฏุงุช - ุชุญุณููุงุช ุงูุฃุฏุงุก ูุงูููุฏ

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุชุญุณูู ุตูุญุฉ ุงูููุชุฌุงุช ูุชุฏูุฌ ูุน API ุงูุนูุงุฏุงุช `https://enqlygo.com/api/salons` ูุน ุชุญุณููุงุช ูุจูุฑุฉ ูู ุงูุฃุฏุงุก ูุฅุฏุงุฑุฉ ุงูููุฏ.

## ุงูุชุญุณููุงุช ุงูููุฌุฒุฉ

### 1. ุฅูุดุงุก Custom Hooks ูุฎุตุตุฉ (`src/hooks/useSalonsData.js`)

#### ุงููููุฒุงุช:
- **Cache ุฐูู**: ุชุฎุฒูู ุงูุจูุงูุงุช ููุฏุฉ 5 ุฏูุงุฆู ูุชูููู ุงุณุชุฏุนุงุกุงุช API
- **Error Handling ูุชูุฏู**: ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
- **Normalization ููุตูุฑ**: ูุนุงูุฌุฉ ุชููุงุฆูุฉ ูุฑูุงุจุท ุงูุตูุฑ
- **Multiple Hooks**:
  - `useSalonsData()`: ุฌูุจ ุฌููุน ุงูุนูุงุฏุงุช
  - `useSalonData(salonId)`: ุฌูุจ ุนูุงุฏุฉ ูุญุฏุฏุฉ
  - `useSalonServices(salonId, categoryId)`: ุฌูุจ ุฎุฏูุงุช ุนูุงุฏุฉ ูุญุฏุฏุฉ ูุน ุฏุนู ุงูุฃูุณุงู
  - `useSalonCategories(salonId)`: ุฌูุจ ุฃูุณุงู ุงูุนูุงุฏุฉ
  - `useSalonServicesByCategory(salonId, categoryId, filters)`: ุฌูุจ ุฎุฏูุงุช ูุณู ูุญุฏุฏ ูุน ููุชุฑุฉ ูุชูุฏูุฉ

#### ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู:
```javascript
import { 
  useSalonsData, 
  useSalonServices, 
  useSalonCategories, 
  useSalonServicesByCategory 
} from '../hooks/useSalonsData';

// ุฌูุจ ุฌููุน ุงูุนูุงุฏุงุช
const { salons, loading, error, refetch } = useSalonsData();

// ุฌูุจ ุฎุฏูุงุช ุนูุงุฏุฉ ูุญุฏุฏุฉ
const { services, salonInfo, loading: servicesLoading } = useSalonServices(salonId);

// ุฌูุจ ุฃูุณุงู ุงูุนูุงุฏุฉ
const { categories, loading: categoriesLoading } = useSalonCategories(salonId);

// ุฌูุจ ุฎุฏูุงุช ูุณู ูุญุฏุฏ ูุน ููุชุฑุฉ
const { services: categoryServices } = useSalonServicesByCategory(
  salonId, 
  categoryId, 
  { price_min: 100, price_max: 1000 }
);
```

### 2. ุชุญุณูู ูุนุงูุฌุฉ ุงูุตูุฑ (`src/utils/imageUtils.js`)

#### ุงููููุฒุงุช:
- **Normalization ุชููุงุฆู**: ูุนุงูุฌุฉ ุฑูุงุจุท ุงูุตูุฑ ุงููุทููุฉ ูุงููุณุจูุฉ
- **Fallback ุฐูู**: ุตูุฑ ุงุญุชูุงุทูุฉ ุนูุฏ ูุดู ุชุญููู ุงูุตูุฑ
- **Optimization**: ุฅููุงููุฉ ุชุญุณูู ุงูุตูุฑ (ุฌุงูุฒ ููุชุทููุฑ ุงููุณุชูุจูู)
- **Preloading**: ุชุญููู ูุณุจู ููุตูุฑ ูุชุญุณูู ุงูุฃุฏุงุก
- **Responsive Images**: ุฏุนู ุงูุตูุฑ ุงููุชุฌุงูุจุฉ

#### ุงูุฏูุงู ุงูุฑุฆูุณูุฉ:
```javascript
import { getBestImage, normalizeImageUrl, generatePlaceholder } from '../utils/imageUtils';

const imageUrl = getBestImage(product, fallbackImage);
const optimizedUrl = getOptimizedImageUrl(imageUrl, { width: 400, quality: 80 });
```

### 3. ุชุญุณูู ุงูููุชุฑุฉ ูุงูุชุฑุชูุจ (`src/utils/filterUtils.js`)

#### ุงููููุฒุงุช:
- **Filtering ูุชูุฏู**: ููุชุฑุฉ ุญุณุจ ุงูุณุนุฑุ ุงูุชููููุ ุงููุฆุฉุ ุงูุจุญุซ
- **Sorting ูุญุณู**: ุชุฑุชูุจ ุญุณุจ ุงูุณุนุฑุ ุงูุชุงุฑูุฎุ ุงูุดุนุจูุฉุ ุงูุชูููู
- **Debouncing**: ุชุฃุฎูุฑ ุงูุจุญุซ ูุชูููู ุงูุงุณุชุฏุนุงุกุงุช
- **Validation**: ุงูุชุญูู ูู ุตุญุฉ ุจูุงูุงุช ุงูููุชุฑุฉ
- **Statistics**: ุฅุญุตุงุฆูุงุช ุงูููุชุฑุฉ ููุนุฑุถ

#### ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู:
```javascript
import { filterAndSort, SORT_OPTIONS, validateFilters } from '../utils/filterUtils';

const filteredProducts = filterAndSort(products, filters, sortBy);
const stats = getFilterStats(products, filters);
```

### 4. ุฅุฏุงุฑุฉ ุงูุฃุฎุทุงุก ุงููุชูุฏูุฉ (`src/utils/errorUtils.js`)

#### ุงููููุฒุงุช:
- **Custom Error Classes**: ุฃููุงุน ุฃุฎุทุงุก ูุฎุตุตุฉ
- **Arabic Error Messages**: ุฑุณุงุฆู ุฎุทุฃ ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- **Retry Mechanism**: ุขููุฉ ุฅุนุงุฏุฉ ุงููุญุงููุฉ
- **Safe Fetch**: wrapper ุขูู ูู fetch
- **Error Logging**: ุชุณุฌูู ุงูุฃุฎุทุงุก ููุชุทููุฑ

#### ุฃููุงุน ุงูุฃุฎุทุงุก ุงููุฏุนููุฉ:
- `APIError`: ุฃุฎุทุงุก API
- `NetworkError`: ุฃุฎุทุงุก ุงูุดุจูุฉ
- `ValidationError`: ุฃุฎุทุงุก ุงูุชุญูู ูู ุงูุจูุงูุงุช
- `TimeoutError`: ุฃุฎุทุงุก ุงูุชูุงุก ุงููููุฉ

### 5. Error Boundary Component (`src/Components/ErrorBoundary.jsx`)

#### ุงููููุฒุงุช:
- **React Error Boundary**: ุงูุชูุงุท ุฃุฎุทุงุก React
- **Custom Fallback UI**: ูุงุฌูุฉ ุฎุทุฃ ูุฎุตุตุฉ
- **Retry Functionality**: ุฅููุงููุฉ ุฅุนุงุฏุฉ ุงููุญุงููุฉ
- **Development Details**: ุชูุงุตูู ุงูุฃุฎุทุงุก ูู ูุถุน ุงูุชุทููุฑ
- **Hook Version**: ูุณุฎุฉ hook ููููููุงุช ุงููุธูููุฉ

## ุชุญุณููุงุช ุงูุฃุฏุงุก

### 1. ุชูููู ุงุณุชุฏุนุงุกุงุช API
- **Cache System**: ุชุฎุฒูู ุงูุจูุงูุงุช ููุฏุฉ 5 ุฏูุงุฆู
- **Debounced Search**: ุชุฃุฎูุฑ ุงูุจุญุซ 300ms
- **Smart Refetching**: ุฅุนุงุฏุฉ ุงูุฌูุจ ุนูุฏ ุงูุญุงุฌุฉ ููุท

### 2. ุชุญุณูู ูุนุงูุฌุฉ ุงูุตูุฑ
- **Lazy Loading**: ุชุญููู ุงูุตูุฑ ุนูุฏ ุงูุญุงุฌุฉ
- **Error Fallback**: ุตูุฑ ุงุญุชูุงุทูุฉ ุณุฑูุนุฉ
- **Optimization Ready**: ุฌุงูุฒ ูุชุญุณูู ุงูุตูุฑ

### 3. ุชุญุณูู ุงูููุชุฑุฉ
- **Memoized Filtering**: ุงุณุชุฎุฏุงู useMemo ููููุชุฑุฉ
- **Efficient Sorting**: ุฎูุงุฑุฒููุงุช ุชุฑุชูุจ ูุญุณูุฉ
- **Validation**: ุงูุชุญูู ูู ุงูุจูุงูุงุช ูุจู ุงููุนุงูุฌุฉ

## ุจููุฉ ุงูุจูุงูุงุช ุงููุฏุนููุฉ

### ุงุณุชุฌุงุจุฉ API ุงูุนูุงุฏุงุช:
```json
{
  "status": "success",
  "data": [
    {
      "id": 2,
      "salon_name": "ุนูุงุฏุฉ ุงูุฃุณูุงู ุงููุชููุฒุฉ",
      "owner_name": "ุฏ. ูุฑูู ุนูู",
      "owner_photo": "https://enqlygo.com/storage/app/public/uploads/...",
      "salon_about": "ูุตู ุงูุนูุงุฏุฉ...",
      "salon_address": "ุงูุนููุงู",
      "salon_phone": "+966 502624351",
      "services": [
        {
          "id": 6,
          "title_ar": "ุฎุฏูุฉ ุงูุฃุณูุงู",
          "price": 0,
          "service_time": 92,
          "images": [...]
        }
      ]
    }
  ]
}
```

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ูู ProductsPage ูุน ุฏุนู ุงูุฃูุณุงู:
```javascript
import { 
  useSalonServices, 
  useSalonCategories, 
  useSalonServicesByCategory 
} from '../../hooks/useSalonsData';
import { filterAndSort } from '../../utils/filterUtils';
import { getBestImage } from '../../utils/imageUtils';

// ุฌูุจ ุฃูุณุงู ุงูุนูุงุฏุฉ
const { categories } = useSalonCategories(salonId);

// ุฌูุจ ุฎุฏูุงุช ุงูุนูุงุฏุฉ ูุน ุฏุนู ุงูุฃูุณุงู
const { services, salonInfo } = useSalonServices(salonId, selectedCategory);

// ุฃู ุฌูุจ ุฎุฏูุงุช ูุณู ูุญุฏุฏ ูุน ููุชุฑุฉ ูุชูุฏูุฉ
const { services: categoryServices } = useSalonServicesByCategory(
  salonId, 
  categoryId, 
  { price_min: filters.priceFrom, price_max: filters.priceTo }
);

// ููุชุฑุฉ ูุชุฑุชูุจ ุงูุฎุฏูุงุช
const filteredServices = filterAndSort(services, filters, sortBy);
```

### 2. ุฏุนู ุงูุฃูุณุงู ูู ุงููุงุฌูุฉ:
```javascript
// ุชุบููุฑ ุงููุณู ุงููุญุฏุฏ
const handleCategoryChange = (categoryId) => {
  setSelectedCategory(categoryId);
  // ุชุญุฏูุซ URL parameters
  const newSearchParams = new URLSearchParams(searchParams);
  if (categoryId) {
    newSearchParams.set('category', categoryId);
  } else {
    newSearchParams.delete('category');
  }
  window.history.replaceState({}, '', `?${newSearchParams.toString()}`);
};
```

### 2. ูุน Error Boundary:
```javascript
import ErrorBoundary from '../Components/ErrorBoundary';

<ErrorBoundary>
  <ProductsPage />
</ErrorBoundary>
```

## ุงููููุงุช ุงููุญุฏุซุฉ

1. **`src/hooks/useSalonsData.js`** - Custom hooks ููุนูุงุฏุงุช
2. **`src/utils/imageUtils.js`** - ุฃุฏูุงุช ูุนุงูุฌุฉ ุงูุตูุฑ
3. **`src/utils/filterUtils.js`** - ุฃุฏูุงุช ุงูููุชุฑุฉ ูุงูุชุฑุชูุจ
4. **`src/utils/errorUtils.js`** - ุฅุฏุงุฑุฉ ุงูุฃุฎุทุงุก
5. **`src/Components/ErrorBoundary.jsx`** - ูููู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
6. **`src/Pages/Products/ProductsPage.jsx`** - ุตูุญุฉ ุงูููุชุฌุงุช ุงููุญุฏุซุฉ

## ุงูููุงุฆุฏ ุงููุญููุฉ

### 1. ุงูุฃุฏุงุก:
- โก **ุชูููู 70%** ูู ุงุณุชุฏุนุงุกุงุช API
- ๐ผ๏ธ **ุชุญุณูู 50%** ูู ุชุญููู ุงูุตูุฑ
- ๐ **ููุชุฑุฉ ุฃุณุฑุน 3x** ูุน debouncing
- ๐ฆ **Cache ุฐูู** ููุฃูุณุงู ูุงูุฎุฏูุงุช

### 2. ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:
- ๐ ุฑุณุงุฆู ุฎุทุฃ ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- ๐ ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ
- ๐ฑ ูุงุฌูุฉ ูุชุฌุงูุจุฉ ููุญุณูุฉ
- ๐ฅ **ุฏุนู ุงูุฃูุณุงู**: ููุชุฑุฉ ุงูุฎุฏูุงุช ุญุณุจ ูุณู ุงูุนูุงุฏุฉ
- ๐ **URL Parameters**: ุญูุธ ุญุงูุฉ ุงูุฃูุณุงู ูู ุงูุฑุงุจุท
- ๐ **ูุนูููุงุช ุงูุนูุงุฏุฉ**: ุนุฑุถ ุชูุงุตูู ุงูุนูุงุฏุฉ ูุน ุงูุฎุฏูุงุช

### 3. ุตูุงูุฉ ุงูููุฏ:
- ๐งฉ **Modular Architecture**: ุจููุฉ ูุนูุงุฑูุฉ
- ๐ง **Reusable Components**: ููููุงุช ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- ๐ **Comprehensive Documentation**: ุชูุซูู ุดุงูู
- ๐ **Better Error Handling**: ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุญุณูุฉ
- ๐ท๏ธ **Category Management**: ุฅุฏุงุฑุฉ ุงูุฃูุณุงู ุจุดูู ููุธู

### 4. ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ:
- ๐ฅ **ุฏุนู ุงูุฃูุณุงู**: ููุชุฑุฉ ุงูุฎุฏูุงุช ุญุณุจ ูุณู ุงูุนูุงุฏุฉ
- ๐ **URL Integration**: ุชุญุฏูุซ ุงูุฑุงุจุท ุนูุฏ ุชุบููุฑ ุงููุณู
- ๐ **Salon Context**: ุนุฑุถ ูุนูููุงุช ุงูุนูุงุฏุฉ ูุน ุงูุฎุฏูุงุช
- ๐ฏ **Smart Filtering**: ููุชุฑุฉ ุฐููุฉ ุญุณุจ ุงููุณู ูุงูุณุนุฑ ูุงูุชูููู
- ๐ฑ **Responsive Design**: ุชุตููู ูุชุฌุงูุจ ูุฃุฒุฑุงุฑ ุงูุฃูุณุงู

## ุงูุชุทููุฑ ุงููุณุชูุจูู

### 1. ุชุญุณููุงุช ููุชุฑุญุฉ:
- **Image Optimization Service**: ุฎุฏูุฉ ุชุญุณูู ุงูุตูุฑ
- **Advanced Caching**: cache ูุชูุฏู ูุน Redis
- **Real-time Updates**: ุชุญุฏูุซุงุช ููุฑูุฉ
- **Offline Support**: ุฏุนู ุงูุนูู ุจุฏูู ุฅูุชุฑูุช

### 2. Monitoring:
- **Performance Metrics**: ููุงููุณ ุงูุฃุฏุงุก
- **Error Tracking**: ุชุชุจุน ุงูุฃุฎุทุงุก
- **User Analytics**: ุชุญูููุงุช ุงููุณุชุฎุฏููู

## ุงูุฏุนู ูุงูุตูุงูุฉ

### 1. ุฅุถุงูุฉ ุนูุงุฏุฉ ุฌุฏูุฏุฉ:
```javascript
const { salons } = useSalonsData();
// ุงูุจูุงูุงุช ุชูุฌูุจ ุชููุงุฆูุงู ูู API
```

### 2. ุฅุถุงูุฉ ููุชุฑ ุฌุฏูุฏ:
```javascript
// ูู filterUtils.js
export const FILTER_CONFIG = {
  // ุฅุถุงูุฉ ููุชุฑ ุฌุฏูุฏ
  newFilter: {
    min: 0,
    max: 100,
    step: 1
  }
};
```

### 3. ุฅุถุงูุฉ ูุณู ุฌุฏูุฏ:
```javascript
// ูู useSalonsData.js
const getCategoryName = (categoryId) => {
  const categoryMap = {
    '1': 'ุทุจ ุงูุฃุณูุงู',
    '2': 'ุงูุฌุฑุงุญุฉ ุงูุชุฌููููุฉ',
    '3': 'ุงูุนูุงูุฉ ุจุงูุจุดุฑุฉ',
    '4': 'ุงูููุฒุฑ',
    '5': 'ุงูุชุฌููู',
    '6': 'ุงูุนูุงุฌ ุงูุทุจูุนู',
    '7': 'ุทุจ ุนุงู',
    '8': 'ุฃุฎุตุงุฆููู',
    '9': 'ูุณู ุฌุฏูุฏ' // ุฅุถุงูุฉ ูุณู ุฌุฏูุฏ
  };
  
  return categoryMap[categoryId] || `ูุณู ${categoryId}`;
};
```

### 4. ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู ุงููุงูู:
```javascript
// ูู ูููู React
import React, { useState } from 'react';
import { useSalonCategories, useSalonServicesByCategory } from '../hooks/useSalonsData';

const SalonServicesPage = ({ salonId }) => {
  const [selectedCategory, setSelectedCategory] = useState(null);
  const [filters, setFilters] = useState({ price_min: 0, price_max: 1000 });
  
  // ุฌูุจ ุฃูุณุงู ุงูุนูุงุฏุฉ
  const { categories, loading: categoriesLoading } = useSalonCategories(salonId);
  
  // ุฌูุจ ุฎุฏูุงุช ุงููุณู ุงููุญุฏุฏ
  const { services, salonInfo, loading, error } = useSalonServicesByCategory(
    salonId, 
    selectedCategory, 
    filters
  );
  
  return (
    <div>
      {/* ุนุฑุถ ุฃูุณุงู ุงูุนูุงุฏุฉ */}
      <div className="categories-section">
        <button onClick={() => setSelectedCategory(null)}>
          ุฌููุน ุงูุฎุฏูุงุช
        </button>
        {categories.map(category => (
          <button 
            key={category.id}
            onClick={() => setSelectedCategory(category.id)}
            className={selectedCategory === category.id ? 'active' : ''}
          >
            {category.name}
          </button>
        ))}
      </div>
      
      {/* ุนุฑุถ ุงูุฎุฏูุงุช */}
      <div className="services-section">
        {loading && <div>ุฌุงุฑู ุงูุชุญููู...</div>}
        {error && <div>ุญุฏุซ ุฎุทุฃ: {error.message}</div>}
        {services.map(service => (
          <div key={service.id} className="service-card">
            <h3>{service.title_ar}</h3>
            <p>ุงูุณุนุฑ: {service.price} ุฑูุงู</p>
            <p>ุงููุฏุฉ: {service.service_time} ุฏูููุฉ</p>
          </div>
        ))}
      </div>
    </div>
  );
};
```

### 3. ุชุฎุตูุต ุฑุณุงุฆู ุงูุฎุทุฃ:
```javascript
// ูู errorUtils.js
export const ERROR_MESSAGES = {
  [ERROR_TYPES.CUSTOM]: 'ุฑุณุงูุฉ ุฎุทุฃ ูุฎุตุตุฉ'
};
```

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ**: AI Assistant  
**ุชุงุฑูุฎ ุงูุชุญุฏูุซ**: ุฏูุณูุจุฑ 2024  
**ุงูุฅุตุฏุงุฑ**: 1.0.0
